#!/bin/sh

# Run tests before push
echo "ğŸ§ª Running affected tests..."
bun nx affected --target=test --parallel=3

# Run build to ensure everything compiles
echo "ğŸ”¨ Running affected build..."
bun nx affected --target=build --parallel=3

# Check if there are changes after formatting
if ! git diff --quiet; then
  echo "âš ï¸  Files were formatted. Please review and stage the changes."
  git status --short
  exit 1
fi

echo "âœ… Pre-push checks passed!"
